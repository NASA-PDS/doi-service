

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>üì¶ Installation &mdash; PDS DOI Service  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="üë©‚Äçüíª Development" href="../development/index.html" />
    <link rel="prev" title="PDS DOI Service" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> PDS DOI Service
          

          
            
            <img src="../_static/PDS_Planets.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">üì¶ Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-instructions">Installation Instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-service-via-command-line-tool">Running the service via command line tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-service-via-web-api">Running the service via Web API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#upgrading-the-service">Upgrading the Service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">üë©‚Äçüíª Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">üèÉ‚Äç Ô∏èUsage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Ô∏èCommand Line API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html#swagger-api">Swagger API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">üöë Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDS DOI Service</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>üì¶ Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/installation/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="installation">
<h1>üì¶ Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¬∂</a></h1>
<p>This section describes how to install the PDS DOI Service.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¬∂</a></h2>
<p>Prior to installing this software, ensure your system meets the following
requirements:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/">Python</a> 3.9 or above. Python 2 will absolutely <em>not</em> work.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libxml2</span></code> version 2.9.2; later 2.9 versions are fine.  Run <code class="docutils literal notranslate"><span class="pre">xml2-config</span>
<span class="pre">--version</span></code> to find out.</p></li>
</ul>
<p>Consult your operating system instructions or system administrator to install
the required packages. For those without system administrator access, you
can use a local <a class="reference external" href="https://www.python.org/">Python</a> 3 installation using a <a class="reference external" href="https://docs.python.org/3/library/venv.html">virtual environment</a>
installation.</p>
</section>
<section id="installation-instructions">
<h2>Installation Instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this heading">¬∂</a></h2>
<p>This section documents the installation procedure.</p>
<section id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this heading">¬∂</a></h3>
<p>The easiest way to install this software is to use <a class="reference external" href="https://pip.pypa.io/en/stable/">Pip</a>, the Python Package
Installer. If you have Python on your system, you probably already have Pip;
you can run <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">--help</span></code> to check. Then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pds</span><span class="o">-</span><span class="n">doi</span><span class="o">-</span><span class="n">service</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above command will install latest approved release.
To install a prior release, you can run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pds</span><span class="o">-</span><span class="n">doi</span><span class="o">-</span><span class="n">service</span><span class="o">==&lt;</span><span class="n">version</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The released versions are listed on: <a class="reference external" href="https://pypi.org/project/pds-doi-service/#history">https://pypi.org/project/pds-doi-service/#history</a></p>
<p>If you want to use the latest unstable version, refer to the <a class="reference external" href="../development/index.html">development</a> documentation</p>
</div>
<p>If you don‚Äôt want the package dependencies to interfere with your local system
you can use a <a class="reference external" href="https://docs.python.org/3/library/venv.html">virtual environment</a>  for your deployment.
To do so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -p $HOME/.venv
python3 -m venv $HOME/.venv/pds-doi-service
pip3 install pds-doi-service
</pre></div>
</div>
<p>At this point, the PDS DOI Service commands are available in
<code class="docutils literal notranslate"><span class="pre">$HOME/.venv/pds-doi-service/bin</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>‚ÄúActivating‚Äù the virtual environment is deprecated, as per the Python
philosophy of ‚Äúexplict &gt; implicit‚Äù. Instead, invoke the commands directly
in <code class="docutils literal notranslate"><span class="pre">$HOME/.venv/pds-doi-service/bin</span></code></p>
</div>
</section>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¬∂</a></h3>
<p>The PDS DOI Service utilizes an INI file for its configuration. While there is a
default configuration file bundled with the service, it may be superseded by
a user-provided configuration within the installation directory.</p>
<p>To determine the appropriate location for a user configuration file, run the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import sys;print(sys.prefix)&quot;</span>
</pre></div>
</div>
<p>Within the directory returned, create a file named <code class="docutils literal notranslate"><span class="pre">pds_doi_service.ini</span></code>.</p>
<p>In this file you can override any option set in the default configuration file
<code class="docutils literal notranslate"><span class="pre">pds_doi_service/core/util/conf.ini.default</span></code> found within the package. An
example of this file may be found
<a class="reference external" href="https://raw.githubusercontent.com/NASA-PDS/pds-doi-service/main/src/pds_doi_service/core/util/conf.ini.default">here</a>.</p>
<p>For example, if you want the service to create production DOIs, update the
DataCite server url:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DATACITE</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="o">.</span><span class="n">datacite</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">dois</span>
</pre></div>
</div>
<p>In order for the service to do any communication with the DataCite server, You
<strong>MUST</strong> set the appropriate username and password to be able to reserve or
release a DOI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DATACITE</span><span class="p">]</span>
<span class="n">user</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
<span class="n">password</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Send a request to <a class="reference external" href="mailto:pds-operator&#37;&#52;&#48;jpl&#46;nasa&#46;gov">pds-operator<span>&#64;</span>jpl<span>&#46;</span>nasa<span>&#46;</span>gov</a> if proper credentials are needed.</p>
<p>The PDS DOI service uses a local database and file system space to store transactions.
The default location for these files is the installation location (<code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code>),
however, it can be updated as follows in the configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">OTHER</span><span class="p">]</span>
<span class="n">transaction_dir</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">directory</span> <span class="n">absolute</span> <span class="n">path</span><span class="o">&gt;</span>
<span class="n">db_file</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">database</span> <span class="n">absolute</span> <span class="n">path</span><span class="o">&gt;/</span><span class="n">doi</span><span class="o">.</span><span class="n">db</span>
</pre></div>
</div>
<p>You can also change the logging level by changing the configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">OTHER</span><span class="p">]</span>
<span class="n">logging_level</span> <span class="o">=</span> <span class="n">DEBUG</span>
</pre></div>
</div>
<p>Authorized values are <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> and <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> (case-insensitive)‚Ä¶
(see <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging-levels">https://docs.python.org/3/library/logging.html#logging-levels</a>)</p>
</section>
<section id="running-the-service-via-command-line-tool">
<h3>Running the service via command line tool<a class="headerlink" href="#running-the-service-via-command-line-tool" title="Permalink to this heading">¬∂</a></h3>
<p>Once installed, you can run <code class="docutils literal notranslate"><span class="pre">pds-doi-cmd</span> <span class="pre">--help</span></code> to get a usage message and ensure
the service is properly installed. You can then consult the <a class="reference external" href="../usage/index.html">usage</a> documentation
for more details.</p>
</section>
<section id="running-the-service-via-web-api">
<h3>Running the service via Web API<a class="headerlink" href="#running-the-service-via-web-api" title="Permalink to this heading">¬∂</a></h3>
<p>You can start the web API service with command line <code class="docutils literal notranslate"><span class="pre">pds-doi-api</span></code>.</p>
<p>You can explore the API documentation and test it using its built-in Swagger UI.
To access the test UI, navigate to <a class="reference external" href="http://localhost:8080/PDS_APIs/pds_doi_api/0.2/ui/">http://localhost:8080/PDS_APIs/pds_doi_api/0.2/ui/</a>
using a web-browser on the same machine that is running the API service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to access the built-in Swagger UI, there must <strong>not</strong> be any value
set for the <code class="docutils literal notranslate"><span class="pre">OTHER.api_valid_referrers</span></code> section of the INI config. To
ensure the value is not set, add the following the user configuration file
described in the Configuration section above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">OTHER</span><span class="p">]</span>
<span class="n">api_valid_referrers</span> <span class="o">=</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="upgrading-the-service">
<h2>Upgrading the Service<a class="headerlink" href="#upgrading-the-service" title="Permalink to this heading">¬∂</a></h2>
<p>To check for and install an upgrade to the service, run the following command in
your virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pds</span><span class="o">-</span><span class="n">doi</span><span class="o">-</span><span class="n">service</span>
</pre></div>
</div>
<p>Upgrades to the PDS DOI Service should typically not affect any existing transaction
database, transaction history, or INI configuration settings. If an instance of
the PDS DOI API is running, for example in a <code class="docutils literal notranslate"><span class="pre">screen</span></code> session, it is recommended that
it be terminated before performing an upgrade.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An update to an existing virtualenv installation of the PDS DOI Service may fail
if the underlying minimum required Python version has changed. If so, a new
virtual environment should be created using the required version of Python, after
which the latest version of the Service may be installed into it. Consult the
installation instructions above on how to create a new virtual environment.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In rare circumstances, an upgrade may invalidate an existing transaction
database if the update includes a change to the underlying schema. Any such changes
will be clearly identified in the release notes for the version of the service.
The <code class="docutils literal notranslate"><span class="pre">pds-doi-init</span></code> script may be used in these circumstances to rebuild a fresh
transaction database and transaction history based on what is available on DataCite.
For this reason, it is recommended that any outstanding draft or review DOI
requests are finalized and released before performing an upgrade which invalidates
the transaction database. Consult the <a class="reference external" href="../usage/index.html">usage</a> documentation for more details
on running <code class="docutils literal notranslate"><span class="pre">pds-doi-init</span></code>.</p>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../development/index.html" class="btn btn-neutral float-right" title="üë©‚Äçüíª Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="PDS DOI Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020‚Äì2022 California Institute of Technology

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>